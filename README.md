<p align="center">
  <a href="" rel="noopener">
 <img width=100px height=100px src="https://image.flaticon.com/icons/svg/1786/1786548.svg" alt="Project logo"></a>
</p>

<h3 align="center">ShablBot</h3>

![Build](https://img.shields.io/azure-devops/build/sasna142/026fd26f-bb59-48fd-bb91-6d9ebe113f87/2)
![License](https://img.shields.io/github/license/blackgard/shablbot)

---------------------------------

 ü§ñ –ë–æ—Ç –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Python –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –í–∫–æ–Ω—Ç–∞–∫—Ç–µ, —Ä–∞–±–æ—Ç–∞—é—â–∏–π —á–µ—Ä–µ–∑ VkBotLongPull. 

## üéà –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```
  git clone https://github.com/Blackgard/shablbot.git
```

## üèÅ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ 
–í—Å–µ –¥–ª—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏ –±–æ—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ **settings.py**. –î–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ —Ñ–∞–π–ª–µ –µ—Å—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –µ–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞:
1. *token* - –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É –≤–∫–æ–Ω—Ç–∞–∫—Ç–µ, –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å –ø—Ä–∞–≤–∞–º–∏ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.
``` 
  token       = r'1234566789908798689764867293876243987" # (str)
```
2. *bot_group_id* - id —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–∫–æ–Ω—Ç–∞–∫—Ç–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, –æ—Ç –ª–∏—Ü–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–æ—Ç.
```
  bot_chat_id = 123456789  # (int)
```
3. *def_temp* - —Å–ª–æ–≤–æ –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –±–æ—Ç –±—É–¥–µ—Ç –∫–∞–∫-–ª–∏–±–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å.
```
  def_templ       = [             
        r"–±–æ—Ç",
  ]     
```
4. *admin_id* - id —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–∫–æ–Ω—Ç–∞–∫—Ç–µ —á–µ–ª–æ–≤–µ–∫–∞, –æ—Ç –ª–∏—Ü–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞.
```
  admin_id        = 123456789 # (int)
```
–û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –º–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

## üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```
  windows : py run_bot.py
  linux   : python run_bot.py
```

## üíª –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã 

–ë–æ—Ç –ø–æ –∏–º–µ–Ω–∏ "–•–æ–¥–æ—Ä" - <a href='https://vk.com/hodor_designer'>vk.com/hodor_designer</a>

## ‚úÖ –ú–µ—Ç–æ–¥—ã 

–§–∞–π–ª **cache.py**:
* `save_chat_to_cache(chat_id, settings = None)` : –∑–∞–¥–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ —Å –Ω–æ–≤–æ–π –±–µ—Å–µ–¥–æ–π.
* `add_word_in_counter_chat(chat_id, type_word)` : –¥–æ–±–∞–≤–ª—è–µ—Ç –≥—Ä—É–ø–ø–µ, –≤ –∫–æ—Ç–æ—Ä—É—é –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏–ª —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ä–µ–¥–∫–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Ñ—Ä–∞–∑—ã.

–§–∞–π–ª **chat_settings**
* `get_settings_chat(chat_id, type_time = None, t_from = None, t_to = None, included = None)` : –ø–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º —Å–æ–∑–¥–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –±–µ—Å–µ–¥—ã, —Å –∫–æ—Ç–æ—Ä–æ–π –±–æ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞–ª.
* `modify_settings_chat(chat_id, settings)` : –∏–∑–º–µ–Ω—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É –∑–∞–¥–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã –Ω–∞ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π settings.

–§–∞–π–ª **handler_command**
* `parse_message_com(message, user_id, chat_id, botAPI)` : –∏—â–µ—Ç –≤ –ø–æ–ª—É—á–µ–Ω–Ω–æ–º –±–æ—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –æ–∑–Ω–∞—á–∞—é—â–∏–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –±–æ—Ç–∞.
* `execute_public_com(name_com, chat_id, admin_id=SETTINGS.admin_id)` : –æ–±—Ä–∞—Ç—ã–≤–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –≤–æ–∑—Ä–∞—â–∞–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã —Å–≤–æ–π –æ—Ç–≤–µ—Ç.
* `execute_private_com(command, name_com, bot, chat_id, admin_id=SETTINGS.admin_id)` : –æ–±—Ä–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –≤–æ–∑—Ä–∞—â–∞–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã —Å–≤–æ–π –æ—Ç–≤–µ—Ç.

–§–∞–π–ª **handler_message**
* `get_random_id()` : –≤–æ–∑—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ (–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è).
* `write_msg(answer, chat_id, botAPI)` : –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–ª–∏ –≤ –±–µ—Å–µ–¥—É.
* `choice_of_answer(found_matches)` : –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –≤—ã–±–æ—Ä –æ—Ç–≤–µ—Ç–∞ –∏–∑ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤.
* `find_matches(message)` : –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ø–æ–∏—Å–∫ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤.
* `preprocessing_message(list_answer, chat_id, botAPI)` : –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π (–í —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞)
* `check_on_com_and_module(message, eventObj, botAPI)` : –º–æ—Å—Ç –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏ handler_command –∏ handler_modules.
* `handler_message(eventObj, chat_id, botAPI)` : –≤—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.

–§–∞–π–ª **handler_modules**
* `parse_message_module(message, user_id, chat_id, botAPI)` : –∏—â–µ—Ç –≤ –ø–æ–ª—É—á–µ–Ω–Ω–æ–º –±–æ—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –º–æ–¥—É–ª–µ–π.
* `find_mathes(message, templates)` : –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ø–æ–∏—Å–∫ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤. (–í —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞).

–§–∞–π–ª **init_bot**
* `check_module(module_path)` : –∏—â–µ—Ç –º–æ–¥—É–ª—å –¥–ª—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏.
* `import_module_from_spec(module_spec)` : –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è –ø–æ –ø–æ–ª—É—á–µ–Ω–Ω–æ–º—É spec –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ check_module.
* `load_cache()` : –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∑–∞–≥—Ä—É–∑–∫—É –≤ –∫–µ—à –±–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞ settings.py.
* `load_modules()` : –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥—É–ª–µ.
* `init_components()` : –≤—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞.

–§–∞–π–ª **time_work**
* `_getTime(time)` : —Å–æ–∑–¥–∞–µ—Ç –ø–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–µ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –æ–±—å–µ–∫—Ç datetime.
* `check_work_time(chat_id)` : –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–æ–∂–µ—Ç –∏–º–µ–µ—Ç –ª–∏ –±–æ—Ç –ø–∏—Å–∞—Ç—å –æ—Ç–≤–µ—Ç –≤ –±–µ—Å–µ–¥—É.

## ‚úçÔ∏è –ê–≤—Ç–æ—Ä
* [@alex_blackgard](https://github.com/blackgard) - bot creator
